@page
@using Luxuryphile.CORE
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div>
    <h1 class="display-4">Nový prodej</h1>
    <p>Doplňte údaje o klientovi</p>
</div>


<form method="post">
  <div class="form-group">
    <select asp-for="Customer.Country" class="form-control">
      <option selected hidden>Načíst klienta<klienta></klienta></option>
      @foreach (var customer in Model.Customers)
      {
        <option value="@customer.Id">@customer.Name@(string.IsNullOrEmpty(customer.AddressOneLine)? string.Empty: $", {customer.AddressOneLine}")</option>
      }
    </select>
  </div>
  
  <div class="form-row">
    <div class="form-group col-md-6">
      <label asp-for="Customer.Name">Jméno</label>
      <input asp-for="Customer.Name" class="form-control" placeholder="Jméno">
    </div>
    <div class="form-group col-md-6">
      <label asp-for="Customer.Email">Email</label>
      <input asp-for="Customer.Email" type="email" class="form-control" placeholder="Email">
    </div>
  </div>
  <div class="form-group">
    <label asp-for="Customer.Street">Ulice</label>
    <input asp-for="Customer.Street" class="form-control" placeholder="Ulice">
  </div>
  <div class="form-row">
    <div class="form-group col-md-6">
      <label asp-for="Customer.City">Město</label>
      <input asp-for="Customer.City" class="form-control" placeholder="Město">
    </div>
    <div class="form-group col-md-4">
      <label asp-for="Customer.Country">Země</label>
      <select asp-for="Customer.Country" class="form-control">
        <option selected value="CZ">Česká republika</option>
        <option value="SK">Slovensko</option>
      </select>
    </div>
    <div class="form-group col-md-2">
      <label asp-for="Customer.ZipCode">PSČ</label>
      <input asp-for="Customer.ZipCode" class="form-control" placeholder="PSČ">
    </div>
  </div>
  
  <hr/>
  <div class="form-group">
    <label asp-for="AccountId">Účet</label>
    <select asp-for="AccountId" class="form-control">
      @foreach (var account in Model.Accounts)
      {
        <option value="@account.Id">@account.Name (@account.Currency): @account.Number</option>
      }
    </select>
  </div>
  
  <hr/>
  <label asp-for="SoldItems">Položky</label>
  @for(var i=0; i<Model.SoldItems.Count; i++)
  {    
    <div class="form-row">
      <div class="form-group col-md-1">
              <input asp-for="SoldItems[i].Quantity" class="form-control" placeholder="Počet">
            </div>
            <div class="form-group col-md-1">
              <input asp-for="SoldItems[i].UnitName" class="form-control" value="ks">
            </div>
            <div class="form-group col-md-6">
              <input asp-for="SoldItems[i].Name" class="form-control" placeholder="Položka">
            </div>
            <div class="form-group col-md-2">
              <div class="input-group">
                <input asp-for="SoldItems[i].UnitPrice" class="form-control" placeholder="Cena">
                <div class="input-group-append">
                  <span class="input-group-text">@Model.Currency</span>
                </div>
              </div>
            </div>
            <div class="form-group col-md-2">
              <div class="input-group">
                  <input asp-for="SoldItems[i].VatRateRate" class="form-control" placeholder="DPH">
                  <div class="input-group-append">
                    <span class="input-group-text">%</span>
                  </div>
                </div>
              </div>
      </div>
      
      
  }
 
  
  <button type="submit" class="btn btn-primary">Vytvořit</button>
</form>

<form method="post" asp-page="Index" asp-page-handler="DownloadFile">
  <div>
    <button type="submit" class="btn btn-light">
      <span class="glyphicon glyphicon-cloud-download" aria-hidden="true"></span> Faktura
    </button>
  </div>
</form>